# Unity Antigravity Experiments

This project is a Unity workflow experiment featuring the **Antigravity Toolkit**â€”a set of editor utilities designed to improve the development experience, particularly on Linux.

## Development Notes

```txt
  # Solve xwayland window compositing issues by setting vulkan as the default graphics api for Linux.
  - Project Settings > Player > Other Settings > Graphics > Graphics APIs:
  - uncheck auto graphics api for Linux
  - set vulkan to be the default for Linux

  # For good measure pass -force-vulkan to unity editor in unity hub "add command line arguments"
```

## Setup

To ensure C# IntelliSense works correctly within the Antigravity editor environment, run the provided setup script:

```bash
bash setup_unity_intellisense.sh
```

This script configures the necessary VS Code extensions and creates a compatible workspace layout.

> **Why is this necessary?**
> The official **C# Dev Kit** is not officially supported in the Antigravity editor environment. This script automates the installation and configuration of extensions, ensuring that Unity IntelliSense and debugging work correctly without the proprietary Dev Kit licensing or compatibility issues.
>
> **How it works:**
> 1.  **Installation**: The script checks your local VS Code extensions. If the required C# extensions are missing, it attempts to install them automatically using the `code` CLI.
> 2.  **Patching Process**: It then copies these extensions into the Antigravity environment and "patches" the configuration. This enables IntelliSense and debugging in Antigravity.

## Antigravity Toolkit

The toolkit (`com.antigravity.toolkit`) provides several enhancements to the Unity Editor:

### 1. Enhanced Editor Logs
A custom console window that replaces or augments the default Console.
-   **Access**: `Antigravity > Editor Logs` (or `Cmd/Ctrl + L`).
-   **Features**:
    -   **Collapsible Stack Traces**: Stack traces are rolled up into the log body to reduce clutter. Click the arrow to expand.
    -   **Filtering**: Real-time search/filtering.
    -   **Performance**: Optimized for large log volumes.

### 2. Auto-Save on Blur
To mitigate issues with `Ctrl+S` on some Linux window managers, the toolkit automatically saves all open scenes and assets whenever the Unity Editor application loses focus (e.g., switching to a browser or terminal).
-   *Note: This ensures your work is always persisted when you tab away.*

### 3. Global Debug Log Toggle
Easily silence all debug logs generated by the toolkit or your own code (if hooked into the system) to focus on errors or warnings.
-   **Toggle**: `Antigravity > Toggle Debug Logs`.
-   **Status**: A checkmark in the menu indicates if logs are enabled.

### 4. Editor Lifecycle Hooks
A centralized static class `Antigravity.Editor.EditorLifecycle` that hooks into major Unity Editor events (`update`, `playModeStateChanged`, `focusChanged`, etc.).
-   **Usage**: Subscribe to these events or use the class to manage global editor state.

## Resources
-   **Font**: [Anka Coder Condensed](https://fontlibrary.org/en/font/anka-coder-condensed) (Used in the Console UI)